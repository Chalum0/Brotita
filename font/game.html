<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BROTITA - [Solo]</title>

    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/game.css">
</head>
<body>
    <div class="pannel">
        <h4>WAVE <b class="i-wave">#</b></h4>
        <h1 class="timer">30</h1>
    </div>
    <canvas id="gameCanvas"></canvas>

    <div id="victoryModal" class="modal">
        <div class="modal-content victory">
            <h2>WAVE COMPLETED!</h2>
            <p>You survived the wave!</p>
            <p>Coins collected: <span id="coinsCollected">0</span></p>
            <button id="shopButton">Go to Shop</button>
        </div>
    </div>
    
    <div id="defeatModal" class="modal">
        <div class="modal-content defeat">
            <h2>GAME OVER</h2>
            <p>You died at wave <span id="waveReached">0</span></p>
            <button id="restartButton">Restart Game</button>
            <button id="menuButton">Back to Menu</button>
        </div>
    </div>

    <script>
        let timer = 30;
        let waveIndex = 0;
        let totalCoins = parseInt(localStorage.getItem('playerCoins') || 0);
        let waveCompleted = false;

        let enemyDespawnInterval;
        let isVictoryModalShown = false;
    </script>
    <script src="./assets/js/functions.js"></script>
    <!-- Load classes in the correct order - dependencies first -->
    <script src="./assets/js/weapon.js"></script>
    <script src="./assets/js/inventory.js"></script>
    <script src="./assets/js/bullet.js"></script>
    <script src="./assets/js/player.js"></script>
    <script src="./assets/js/controls.js"></script>
    <script src="./assets/js/tree.js"></script>
    <script src="./assets/js/coin.js"></script>
    <script src="./assets/js/enemy.js"></script>
    <script src="./assets/js/treeManager.js"></script>
    <script src="./assets/js/enemyManager.js"></script>
    <script src="./assets/js/coinManager.js"></script>
    <script src="./assets/js/bulletManager.js"></script>
    <script src="./assets/js/gameEngine.js"></script>

    <script src="./assets/js/game_solo.js">
    </script>
</body>
</html>